<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dispatchers.Unconfined - kotlinx-coroutines-core</title>
  <meta name="description" content="Library support for kotlin coroutines">
  <link rel="stylesheet" href="/kotlinx.coroutines/assets/main.css">
  <link rel="canonical" href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-dispatchers/-unconfined.html">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="/kotlinx.coroutines/assets/js/api.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-47631155-3', 'auto');
    ga('send', 'pageview');
  </script>
</head>

  <body>
    <header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" href="/kotlinx.coroutines/">kotlinx.coroutines</a>
  </div>
</header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="api-docs-breadcrumbs"><a href="../../index.html">kotlinx-coroutines-core</a> / <a href="../index.html">kotlinx.coroutines</a> / <a href="index.html">Dispatchers</a> / <a href="./-unconfined.html">Unconfined</a></div>

<h1 id="unconfined">Unconfined</h1>

<div class="signature"><code><span class="keyword">val </span><span class="identifier">Unconfined</span><span class="symbol">: </span><a href="../-coroutine-dispatcher/index.html"><span class="identifier">CoroutineDispatcher</span></a></code> <a href="https://github.com/kotlin/kotlinx.coroutines/tree/master/kotlinx-coroutines-core/common/src/Dispatchers.common.kt#L75">(source)</a></div>

<p>A coroutine dispatcher that is not confined to any specific thread.
It executes the initial continuation of a coroutine in the current call-frame
and lets the coroutine resume in whatever thread that is used by the corresponding suspending function, without
mandating any specific threading policy. Nested coroutines launched in this dispatcher form an event-loop to avoid
stack overflows.</p>

<h3 id="event-loop">Event loop</h3>

<p>Event loop semantics is a purely internal concept and have no guarantees on the order of execution
except that all queued coroutines will be executed on the current thread in the lexical scope of the outermost
unconfined coroutine.</p>

<p>For example, the following code:</p>

<pre>withContext(Dispatchers.Unconfined) {
   println(1)
   withContext(Dispatchers.Unconfined) { // Nested unconfined
       println(2)
   }
   println(3)
}
println("Done")
</pre>

<p>Can print both “1 2 3” and “1 3 2”, this is an implementation detail that can be changed.
But it is guaranteed that “Done” will be printed only when both <code>withContext</code> calls are completed.</p>

<p>If you need your coroutine to be confined to a particular thread or a thread-pool after resumption,
but still want to execute it in the current call-frame until its first suspension, then you can use
an optional <a href="../-coroutine-start/index.html">CoroutineStart</a> parameter in coroutine builders like
<a href="../launch.html">launch</a> and <a href="../async.html">async</a> setting it to
the value of <a href="../-coroutine-start/-u-n-d-i-s-p-a-t-c-h-e-d.html">CoroutineStart.UNDISPATCHED</a>.</p>


      </div>
    </main>
    <footer class="site-footer">
  <!-- empty -->
</footer>

  </body>
</html>

