<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ArrayBroadcastChannel - kotlinx-coroutines-core</title>
  <meta name="description" content="Library support for kotlin coroutines">
  <link rel="stylesheet" href="/kotlinx.coroutines/assets/main.css">
  <link rel="canonical" href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental.channels/-array-broadcast-channel/">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="/kotlinx.coroutines/assets/js/api.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-47631155-3', 'auto');
    ga('send', 'pageview');
  </script>
</head>

  <body>
    <header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" href="/kotlinx.coroutines/">kotlinx.coroutines</a>
  </div>
</header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="api-docs-breadcrumbs"><a href="../../index.html">kotlinx-coroutines-core</a> / <a href="../index.html">kotlinx.coroutines.experimental.channels</a> / <a href="./index.html">ArrayBroadcastChannel</a></div>

<h1 id="arraybroadcastchannel">ArrayBroadcastChannel</h1>

<div class="signature"><code><span class="keyword">class </span><span class="identifier">ArrayBroadcastChannel</span><span class="symbol">&lt;</span><span class="identifier">E</span><span class="symbol">&gt;</span>&nbsp;<span class="symbol">:</span>&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;<a href="../-abstract-send-channel/index.html"><span class="identifier">AbstractSendChannel</span></a><span class="symbol">&lt;</span><a href="index.html#E"><span class="identifier">E</span></a><span class="symbol">&gt;</span><span class="symbol">, </span><br />&nbsp;&nbsp;&nbsp;&nbsp;<a href="../-broadcast-channel/index.html"><span class="identifier">BroadcastChannel</span></a><span class="symbol">&lt;</span><a href="index.html#E"><span class="identifier">E</span></a><span class="symbol">&gt;</span></code> <a href="http://github.com/kotlin/kotlinx.coroutines/tree/master/core/kotlinx-coroutines-core/src/main/kotlin/kotlinx/coroutines/experimental/channels/ArrayBroadcastChannel.kt#L39">(source)</a></div>

<p><strong>Platform and version requirements:</strong> JVM</p>

<p>Broadcast channel with array buffer of a fixed <a href="capacity.html">capacity</a>.
Sender suspends only when buffer is full due to one of the receives being slow to consume and
receiver suspends only when buffer is empty.</p>

<p>Note, that elements that are sent to the broadcast channel while there are no <a href="open-subscription.html">openSubscription</a> subscribers are immediately
lost.</p>

<p>This channel is created by <code>BroadcastChannel(capacity)</code> factory function invocation.</p>

<p>This implementation uses lock to protect the buffer, which is held only during very short buffer-update operations.
The lock at each subscription is also used to manage concurrent attempts to receive from the same subscriber.
The lists of suspended senders or receivers are lock-free.</p>

<h3 id="constructors">Constructors</h3>

<table class="api-docs-table">
<tbody>
<tr>
<td>

        <p><a href="-init-.html">&lt;init&gt;</a></p>

      </td>
<td>
        <div class="signature"><code><span class="identifier">ArrayBroadcastChannel</span><span class="symbol">(</span><span class="parameterName" id="kotlinx.coroutines.experimental.channels.ArrayBroadcastChannel$&lt;init&gt;(kotlin.Int)/capacity">capacity</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a><span class="symbol">)</span></code></div>

        <p>Broadcast channel with array buffer of a fixed <a href="-init-.html#kotlinx.coroutines.experimental.channels.ArrayBroadcastChannel$&lt;init&gt;(kotlin.Int)/capacity">capacity</a>.
Sender suspends only when buffer is full due to one of the receives being slow to consume and
receiver suspends only when buffer is empty.</p>

      </td>
</tr>
</tbody>
</table>

<h3 id="properties">Properties</h3>

<table class="api-docs-table">
<tbody>
<tr>
<td>

        <p><a href="capacity.html">capacity</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">val </span><span class="identifier">capacity</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-int/index.html"><span class="identifier">Int</span></a></code></div>

        <p>Buffer capacity.</p>

      </td>
</tr>
</tbody>
</table>

<h3 id="inherited-properties">Inherited Properties</h3>

<table class="api-docs-table">
<tbody>
<tr data-platform="JVM"><td>

        <p><a href="../-abstract-send-channel/is-closed-for-send.html">isClosedForSend</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">val </span><span class="identifier">isClosedForSend</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code></div>

        <p>Returns <code>true</code> if this channel was closed by invocation of <a href="../-abstract-send-channel/close.html">close</a> and thus
the <a href="../-abstract-send-channel/send.html">send</a> and <a href="../-abstract-send-channel/offer.html">offer</a> attempts throws exception.</p>

      </td>
</tr><tr data-platform="JVM"><td>

        <p><a href="../-abstract-send-channel/is-full.html">isFull</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">val </span><span class="identifier">isFull</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code></div>

        <p>Returns <code>true</code> if the channel is full (out of capacity) and the <a href="../-abstract-send-channel/send.html">send</a> attempt will suspend.
This function returns <code>false</code> for <a href="../-abstract-send-channel/is-closed-for-send.html">isClosedForSend</a> channel.</p>

      </td>
</tr><tr data-platform="JVM"><td>

        <p><a href="../-abstract-send-channel/on-send.html">onSend</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">val </span><span class="identifier">onSend</span><span class="symbol">: </span><a href="../../kotlinx.coroutines.experimental.selects/-select-clause2.html"><span class="identifier">SelectClause2</span></a><span class="symbol">&lt;</span><a href="../-abstract-send-channel/index.html#E"><span class="identifier">E</span></a><span class="symbol">,</span>&nbsp;<a href="../-send-channel/index.html"><span class="identifier">SendChannel</span></a><span class="symbol">&lt;</span><a href="../-abstract-send-channel/index.html#E"><span class="identifier">E</span></a><span class="symbol">&gt;</span><span class="symbol">&gt;</span></code></div>

        <p>Clause for <a href="#">select</a> expression of <a href="../-abstract-send-channel/send.html">send</a> suspending function that selects when the element that is specified
as parameter is sent to the channel. When the clause is selected the reference to this channel
is passed into the corresponding block.</p>

      </td>
</tr></tbody>
</table>

<h3 id="functions">Functions</h3>

<table class="api-docs-table">
<tbody>
<tr>
<td>

        <p><a href="close.html">close</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">fun </span><span class="identifier">close</span><span class="symbol">(</span><span class="parameterName" id="kotlinx.coroutines.experimental.channels.ArrayBroadcastChannel$close(kotlin.Throwable)/cause">cause</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-throwable/index.html"><span class="identifier">Throwable</span></a><span class="symbol">?</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code></div>

        <p>Closes this channel with an optional exceptional <a href="close.html#kotlinx.coroutines.experimental.channels.ArrayBroadcastChannel$close(kotlin.Throwable)/cause">cause</a>.
This is an idempotent operation – repeated invocations of this function have no effect and return <code>false</code>.
Conceptually, its sends a special “close token” over this channel.</p>

      </td>
</tr>
<tr>
<td>

        <p><a href="open-subscription.html">openSubscription</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">fun </span><span class="identifier">openSubscription</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="../-subscription-receive-channel/index.html"><span class="identifier">SubscriptionReceiveChannel</span></a><span class="symbol">&lt;</span><a href="index.html#E"><span class="identifier">E</span></a><span class="symbol">&gt;</span></code></div>

        <p>Subscribes to this <a href="../-broadcast-channel/index.html">BroadcastChannel</a> and returns a channel to receive elements from it.
The resulting channel shall be <a href="../-subscription-receive-channel/close.html">closed</a> to unsubscribe from this
broadcast channel.</p>

      </td>
</tr>
</tbody>
</table>

<h3 id="inherited-functions">Inherited Functions</h3>

<table class="api-docs-table">
<tbody>
<tr data-platform="JVM"><td>

        <p><a href="../-abstract-send-channel/after-close.html">afterClose</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">open</span> <span class="keyword">fun </span><span class="identifier">afterClose</span><span class="symbol">(</span><span class="parameterName" id="kotlinx.coroutines.experimental.channels.AbstractSendChannel$afterClose(kotlin.Throwable)/cause">cause</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-throwable/index.html"><span class="identifier">Throwable</span></a><span class="symbol">?</span><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></div>

        <p>Invoked after successful <a href="../-abstract-send-channel/close.html">close</a>.</p>

      </td>
</tr><tr data-platform="JVM"><td>

        <p><a href="../-abstract-send-channel/offer.html">offer</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">fun </span><span class="identifier">offer</span><span class="symbol">(</span><span class="parameterName" id="kotlinx.coroutines.experimental.channels.AbstractSendChannel$offer(kotlinx.coroutines.experimental.channels.AbstractSendChannel.E)/element">element</span><span class="symbol">:</span>&nbsp;<a href="../-abstract-send-channel/index.html#E"><span class="identifier">E</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-boolean/index.html"><span class="identifier">Boolean</span></a></code></div>

        <p>Adds <a href="../-abstract-send-channel/offer.html#kotlinx.coroutines.experimental.channels.AbstractSendChannel$offer(kotlinx.coroutines.experimental.channels.AbstractSendChannel.E)/element">element</a> into this queue if it is possible to do so immediately without violating capacity restrictions
and returns <code>true</code>. Otherwise, it returns <code>false</code> immediately
or throws exception if the channel <a href="../-abstract-send-channel/is-closed-for-send.html">isClosedForSend</a> (see <a href="../-abstract-send-channel/close.html">close</a> for details).</p>

      </td>
</tr><tr data-platform="JVM"><td>

        <p><a href="../-abstract-send-channel/send.html">send</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">suspend</span> <span class="keyword">fun </span><span class="identifier">send</span><span class="symbol">(</span><span class="parameterName" id="kotlinx.coroutines.experimental.channels.AbstractSendChannel$send(kotlinx.coroutines.experimental.channels.AbstractSendChannel.E)/element">element</span><span class="symbol">:</span>&nbsp;<a href="../-abstract-send-channel/index.html#E"><span class="identifier">E</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></div>

        <p>Adds <a href="../-abstract-send-channel/send.html#kotlinx.coroutines.experimental.channels.AbstractSendChannel$send(kotlinx.coroutines.experimental.channels.AbstractSendChannel.E)/element">element</a> into to this channel, suspending the caller while this channel <a href="../-abstract-send-channel/is-full.html">isFull</a>,
or throws exception if the channel <a href="../-abstract-send-channel/is-closed-for-send.html">isClosedForSend</a> (see <a href="../-abstract-send-channel/close.html">close</a> for details).</p>

      </td>
</tr></tbody>
</table>

<h3 id="extension-functions">Extension Functions</h3>

<table class="api-docs-table">
<tbody>
<tr data-platform="JVM"><td>

        <p><a href="../consume.html">consume</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">E</span><span class="symbol">, </span><span class="identifier">R</span><span class="symbol">&gt;</span> <a href="../-broadcast-channel/index.html"><span class="identifier">BroadcastChannel</span></a><span class="symbol">&lt;</span><a href="../consume.html#E"><span class="identifier">E</span></a><span class="symbol">&gt;</span><span class="symbol">.</span><span class="identifier">consume</span><span class="symbol">(</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="parameterName" id="kotlinx.coroutines.experimental.channels$consume(kotlinx.coroutines.experimental.channels.BroadcastChannel((kotlinx.coroutines.experimental.channels.consume.E)), kotlin.Function1((kotlinx.coroutines.experimental.channels.SubscriptionReceiveChannel((kotlinx.coroutines.experimental.channels.consume.E)), kotlinx.coroutines.experimental.channels.consume.R)))/block">block</span><span class="symbol">:</span>&nbsp;<a href="../-subscription-receive-channel/index.html"><span class="identifier">SubscriptionReceiveChannel</span></a><span class="symbol">&lt;</span><a href="../consume.html#E"><span class="identifier">E</span></a><span class="symbol">&gt;</span><span class="symbol">.</span><span class="symbol">(</span><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="../consume.html#R"><span class="identifier">R</span></a><br /><span class="symbol">)</span><span class="symbol">: </span><a href="../consume.html#R"><span class="identifier">R</span></a></code></div>

        <p>Opens subscription to this <a href="../-broadcast-channel/index.html">BroadcastChannel</a> and makes sure that the given <a href="../consume.html#kotlinx.coroutines.experimental.channels$consume(kotlinx.coroutines.experimental.channels.BroadcastChannel((kotlinx.coroutines.experimental.channels.consume.E)), kotlin.Function1((kotlinx.coroutines.experimental.channels.SubscriptionReceiveChannel((kotlinx.coroutines.experimental.channels.consume.E)), kotlinx.coroutines.experimental.channels.consume.R)))/block">block</a> consumes all elements
from it by always invoking <a href="../-receive-channel/cancel.html">cancel</a> after the execution of the block.</p>

      </td>
</tr><tr data-platform="JVM"><td>

        <p><a href="../consume-each.html">consumeEach</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">suspend</span> <span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">E</span><span class="symbol">&gt;</span> <a href="../-broadcast-channel/index.html"><span class="identifier">BroadcastChannel</span></a><span class="symbol">&lt;</span><a href="../consume-each.html#E"><span class="identifier">E</span></a><span class="symbol">&gt;</span><span class="symbol">.</span><span class="identifier">consumeEach</span><span class="symbol">(</span><br />&nbsp;&nbsp;&nbsp;&nbsp;<span class="parameterName" id="kotlinx.coroutines.experimental.channels$consumeEach(kotlinx.coroutines.experimental.channels.BroadcastChannel((kotlinx.coroutines.experimental.channels.consumeEach.E)), kotlin.Function1((kotlinx.coroutines.experimental.channels.consumeEach.E, kotlin.Unit)))/action">action</span><span class="symbol">:</span>&nbsp;<span class="symbol">(</span><a href="../consume-each.html#E"><span class="identifier">E</span></a><span class="symbol">)</span>&nbsp;<span class="symbol">-&gt;</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a><br /><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></div>

        <p>Subscribes to this <a href="../-broadcast-channel/index.html">BroadcastChannel</a> and performs the specified action for each received element.</p>

      </td>
</tr><tr data-platform="JVM"><td>

        <p><a href="../send-blocking.html">sendBlocking</a></p>

      </td>
<td>
        <div class="signature"><code><span class="keyword">fun </span><span class="symbol">&lt;</span><span class="identifier">E</span><span class="symbol">&gt;</span> <a href="../-send-channel/index.html"><span class="identifier">SendChannel</span></a><span class="symbol">&lt;</span><a href="../send-blocking.html#E"><span class="identifier">E</span></a><span class="symbol">&gt;</span><span class="symbol">.</span><span class="identifier">sendBlocking</span><span class="symbol">(</span><span class="parameterName" id="kotlinx.coroutines.experimental.channels$sendBlocking(kotlinx.coroutines.experimental.channels.SendChannel((kotlinx.coroutines.experimental.channels.sendBlocking.E)), kotlinx.coroutines.experimental.channels.sendBlocking.E)/element">element</span><span class="symbol">:</span>&nbsp;<a href="../send-blocking.html#E"><span class="identifier">E</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-unit/index.html"><span class="identifier">Unit</span></a></code></div>

        <p>Adds <a href="../send-blocking.html#kotlinx.coroutines.experimental.channels$sendBlocking(kotlinx.coroutines.experimental.channels.SendChannel((kotlinx.coroutines.experimental.channels.sendBlocking.E)), kotlinx.coroutines.experimental.channels.sendBlocking.E)/element">element</a> into to this channel, <strong>blocking</strong> the caller while this channel <a href="../-send-channel/is-full.html">Channel.isFull</a>,
or throws exception if the channel <a href="../-send-channel/is-closed-for-send.html">Channel.isClosedForSend</a> (see <a href="../-send-channel/close.html">Channel.close</a> for details).</p>

      </td>
</tr></tbody>
</table>

      </div>
    </main>
    <footer class="site-footer">
  <!-- empty -->
</footer>

  </body>
</html>

